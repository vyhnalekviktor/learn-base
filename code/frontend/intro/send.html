<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BaseCamp - Send Funds</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/tutorial.css">
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>Send Funds</h1>
            <p class="subtitle">Guide to your first transaction on Base</p>

            <!-- Step 1 -->
            <div class="accordion-item completed">
                <button class="accordion-header" onclick="toggleAccordion('section1')">
                    <span>Step 1: Setup and Fund Your Wallet</span>
                    <span class="accordion-icon" id="icon-section1">‚ñº</span>
                </button>
                <div class="accordion-content" id="content-section1">
                    <p>You need <strong>ETH on Base</strong> to pay for gas fees (transaction costs). Gas fees on Base are extremely cheap - typically $0.01-0.05 per transaction.</p>

                    <p><strong>For Mainnet:</strong> You can bridge ETH from Ethereum to Base using <a href="https://bridge.base.org" target="_blank">bridge.base.org</a>, or buy crypto directly on an exchange and withdraw it to your Base wallet address.</p>

                    <p><strong>For Testnet:</strong> We're using Base Sepolia testnet, so you don't have to buy anything! You already got free test ETH from the faucet in the previous step.</p>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="accordion-item">
                <button class="accordion-header" onclick="toggleAccordion('section2')">
                    <span>Step 2: Initiate the Transaction</span>
                    <span class="accordion-icon" id="icon-section2">‚ñº</span>
                </button>
                <div class="accordion-content" id="content-section2">
                    <p>In your wallet (Coinbase Wallet or MetaMask), follow these steps:</p>

                    <ol>
                        <li>Open your wallet and ensure <strong>Base Sepolia</strong> network is selected</li>
                        <li>Tap <strong>"Send"</strong> button</li>
                        <li>Choose the token you want to transfer (ETH, USDC, etc.)</li>
                        <li>Enter the <strong>recipient's wallet address</strong> - a 42-character code starting with "0x"</li>
                        <li>Specify the <strong>amount</strong> you want to send</li>
                    </ol>

                    <div class="warning-box">
                        <p>‚ö†Ô∏è <strong>Important:</strong> Always double-check the recipient address! Blockchain transactions are <strong>irreversible</strong> - if you send to the wrong address, you cannot get your funds back.</p>
                    </div>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="accordion-item">
                <button class="accordion-header" onclick="toggleAccordion('section3')">
                    <span>Step 3: Sign the Transaction</span>
                    <span class="accordion-icon" id="icon-section3">‚ñº</span>
                </button>
                <div class="accordion-content" id="content-section3">
                    <p>Before finalizing, <strong>review all transaction details carefully:</strong></p>
                    <ul>
                        <li>Recipient address (first 6 and last 4 characters)</li>
                        <li>Amount you're sending</li>
                        <li>Estimated gas fee</li>
                        <li>Network (should be "Base Sepolia")</li>
                    </ul>

                    <p>When everything looks correct, tap <strong>"Confirm"</strong> or <strong>"Send"</strong>.</p>

                    <h4>What is a Digital Signature?</h4>
                    <p>When you approve, your wallet uses your <strong>private key to create a digital signature</strong>. This signature proves:</p>
                    <ul>
                        <li>You own the funds</li>
                        <li>You authorize this specific transfer</li>
                        <li>The transaction data hasn't been tampered with</li>
                    </ul>

                    <div class="info-box">
                        <p><strong>Security Note:</strong> Your private key <strong>never</strong> leaves your device - only the signature is sent to the network.</p>
                    </div>
                </div>
            </div>

            <!-- Step 4 -->
            <div class="accordion-item">
                <button class="accordion-header" onclick="toggleAccordion('section4')">
                    <span>Step 4: Transaction Processing</span>
                    <span class="accordion-icon" id="icon-section4">‚ñº</span>
                </button>
                <div class="accordion-content" id="content-section4">
                    <p>Once signed, here's what happens behind the scenes:</p>

                    <div class="process-steps">
                        <div class="process-step">
                            <h4>1. Sequencer Receives</h4>
                            <p>Your transaction is sent to Base's sequencer (special validator node)</p>
                        </div>

                        <div class="process-step">
                            <h4>2. Instant Processing</h4>
                            <p>Base processes your transaction <strong>off-chain in 1-2 seconds</strong> (Layer 2 speed!)</p>
                        </div>

                        <div class="process-step">
                            <h4>3. Soft Confirmation</h4>
                            <p>You receive confirmation - transaction is complete and funds are transferred</p>
                        </div>

                        <div class="process-step">
                            <h4>4. Batching (Background)</h4>
                            <p>Base bundles your transaction with thousands of others</p>
                        </div>

                        <div class="process-step">
                            <h4>5. Ethereum Settlement</h4>
                            <p>The batch is submitted to Ethereum mainnet for final security (15-20 min later)</p>
                        </div>
                    </div>

                    <p><a href="../theory.html#mempool" class="learn-more">Learn more about how blockchain processes transactions</a></p>
                </div>
            </div>

            <!-- Step 5 -->
            <div class="accordion-item">
                <button class="accordion-header" onclick="toggleAccordion('section5')">
                    <span>Step 5: Verify Transaction</span>
                    <span class="accordion-icon" id="icon-section5">‚ñº</span>
                </button>
                <div class="accordion-content" id="content-section5">
                    <h4>In Your Wallet:</h4>
                    <ul>
                        <li>Status changes from "<i>Pending</i>" to "<i>Confirmed</i>"</li>
                        <li>New balance reflects the sent amount minus gas fee</li>
                        <li>Transaction appears in your history</li>
                    </ul>

                    <h4>On Block Explorer:</h4>
                    <ol>
                        <li>Visit <a href="https://sepolia.basescan.org" target="_blank">sepolia.basescan.org</a> (for testnet)</li>
                        <li>Paste your transaction hash (starts with "0x")</li>
                        <li>View full details:
                            <ul>
                                <li>Sender address (your wallet)</li>
                                <li>Recipient address</li>
                                <li>Amount transferred</li>
                                <li>Gas fee paid</li>
                                <li>Timestamp</li>
                                <li>Block number</li>
                            </ul>
                        </li>
                    </ol>

                    <p>The recipient can now see and use the funds you sent!</p>
                </div>
            </div>

            <!-- Bonus Section -->
            <div class="bonus-section">
                <h3>üí° Bonus: Understanding Gas Fees</h3>
                <p>Gas fees are the cost of processing your transaction on the blockchain. On Base, they're <strong>95-99% cheaper</strong> than Ethereum mainnet!</p>
                <a href="../theory.html#gas-fees" class="learn-more">Learn more about gas fees</a>
            </div>

            <!-- Try it Section -->
            <div class="try-section">
                <h3>Try it yourself!</h3>
                <p>Practice sending a small amount of test ETH on Base Sepolia:</p>
                <div class="practice-info">
                    <p><strong>Test Recipient:</strong></p>
                    <code>0x02D6cB44CF2B0539B5d5F72a7a0B22Ac73031117</code>
                    <p><strong>Amount:</strong> 0.001 ETH (just for practice)</p>
                </div>
                <button id="sendTxBtn" onclick="sendTransaction()" class="cta-button">
                    Send Transaction
                </button>
                <div id="txStatus" class="status" style="display: none; margin-top: 20px; padding: 15px; border-radius: 10px; font-weight: 600;">
                </div>

            <!-- Navigation Footer -->
            <div class="nav-footer">
                <a href="faucet.html" class="nav-btn back-btn">
                    <span>Previous</span>
                    <span class="nav-label">Faucet</span>
                </a>

                <a href="receive.html" class="nav-btn next-btn">
                    <span class="nav-label">Receive Funds</span>
                    <span>Next</span>
                </a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="../src/practiceSend.js"></script>
</body>
</html>
